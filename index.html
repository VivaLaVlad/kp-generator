<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Партнёрская программа MWS</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 0; }
    header { background-color: #d32f2f; color: white; padding: 1.5rem; text-align: center; }
    main { max-width: 1000px; margin: 2rem auto; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .tabs { display: flex; justify-content: center; margin-bottom: 2rem; }
    .tab-button { flex: 1; padding: 1rem; cursor: pointer; border: none; background: #ccc; color: #000; font-weight: bold; }
    .tab-button.active { background: #d32f2f; color: white; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { padding: 8px; border: 1px solid #ddd; text-align: left; }
    th { background-color: #eee; }
    input[type="number"] { width: 100%; padding: 4px; }
    .result { margin-top: 1.5rem; font-size: 1.2rem; color: #388e3c; font-weight: bold; }
    button.calculate { margin-top: 1rem; padding: 0.75rem; background: #d32f2f; color: white; border: none; cursor: pointer; width: 100%; }
  </style>
</head>
<body>
  <header>
    <h1>Калькулятор партнёрской выгоды MWS</h1>
    <p>Отметьте продукты и укажите сумму сделки</p>
  </header>
  <main>
    <div class="tabs">
      <button class="tab-button active" onclick="showTab('agent')">Я Агент</button>
      <button class="tab-button" onclick="showTab('reseller')">Я Реселлер</button>
    </div>

    <div id="agent" class="tab-content active">
      <label><input type="checkbox" id="dealRegistered"> Сделка зарегистрирована</label>
      <label>Ваш уровень:</label>
      <select id="agentLevel">
        <option value="Basic">Basic</option>
        <option value="Expert">Expert</option>
        <option value="Professional">Professional</option>
      </select>
      <table id="agentTable"></table>
      <button class="calculate" onclick="calculate('agent')">Рассчитать</button>
      <div class="result" id="agentResult"></div>
    </div>

    <div id="reseller" class="tab-content">
      <label>Ваш уровень:</label>
      <select id="resellerLevel">
        <option value="Basic">Basic</option>
        <option value="Expert">Expert</option>
        <option value="Professional">Professional</option>
      </select>
      <table id="resellerTable"></table>
      <button class="calculate" onclick="calculate('reseller')">Рассчитать</button>
      <div class="result" id="resellerResult"></div>
    </div>
  </main>

  <script>
    const agentData = {
  "Виртуальная инфраструктура (Virtual Infrastructure)": { Basic: 0.10, Expert: 0.15, Professional: 0.20 },
  "Виртуальная инфраструктура. Аттестованный сегмент 152-ФЗ": { Basic: 0.10, Expert: 0.15, Professional: 0.20 },
  "Виртуальная инфраструктура. Графические процессоры GPU": { Basic: 0.10, Expert: 0.15, Professional: 0.20 },
  "Резервное копирование": { Basic: 0.10, Expert: 0.15, Professional: 0.20 },
  "Катастрофоустойчивая инфраструктура": { Basic: 0.10, Expert: 0.15, Professional: 0.20 },
  "MWS Tables": { Basic: 0.10, Expert: 0.15, Professional: 0.20 },
  "Виртуальное рабочее место (Desktops) и Виртуальное рабочее место (Workspaces с GPU)": { Basic: 0.05, Expert: 0.10, Professional: 0.15 },
  "Корпоративная почта MWS": { Basic: 0.05, Expert: 0.10, Professional: 0.15 },
  "Офис MWS": { Basic: 0.05, Expert: 0.10, Professional: 0.15 },
  "Диск MWS": { Basic: 0.05, Expert: 0.10, Professional: 0.15 },
  "MWS Cloud Platform Object Storage": { Basic: 0.05, Expert: 0.10, Professional: 0.15 },
  "MWS DataOps": { Basic: 0.10, Expert: 0.15, Professional: 0.20 },
  "MWS GPT": { Basic: 0.05, Expert: 0.10, Professional: 0.15 },
  "MWS Container Platform": { Basic: 0.10, Expert: 0.15, Professional: 0.20 },
  "MWS Octapi": { Basic: 0.10, Expert: 0.15, Professional: 0.20 }
};

    const resellerData = {
  "Виртуальная инфраструктура (Virtual Infrastructure)": { Basic: 0.05, Expert: 0.07, Professional: 0.10 },
  "Виртуальная инфраструктура. Аттестованный сегмент 152-ФЗ": { Basic: 0.05, Expert: 0.07, Professional: 0.10 },
  "Виртуальная инфраструктура. Графические процессоры GPU": { Basic: 0.05, Expert: 0.07, Professional: 0.10 },
  "Резервное копирование": { Basic: 0.05, Expert: 0.07, Professional: 0.10 },
  "Катастрофоустойчивая инфраструктура": { Basic: 0.05, Expert: 0.07, Professional: 0.10 },
  "MWS Tables": { Basic: 0.05, Expert: 0.07, Professional: 0.10 },
  "Виртуальное рабочее место (Desktops) и Виртуальное рабочее место (Workspaces с GPU)": { Basic: 0, Expert: 0, Professional: 0 },
  "Корпоративная почта MWS": { Basic: 0, Expert: 0, Professional: 0 },
  "Офис MWS": { Basic: 0, Expert: 0, Professional: 0 },
  "Диск MWS": { Basic: 0, Expert: 0, Professional: 0 },
  "MWS Cloud Platform Object Storage": { Basic: 0, Expert: 0, Professional: 0 },
  "MWS DataOps": { Basic: 0.05, Expert: 0.07, Professional: 0.10 },
  "MWS GPT": { Basic: 0, Expert: 0, Professional: 0 },
  "MWS Container Platform": { Basic: 0.05, Expert: 0.07, Professional: 0.10 },
  "MWS Octapi": { Basic: 0.05, Expert: 0.07, Professional: 0.10 }
};

    function populateTable(id, data) {
      const table = document.getElementById(id + "Table");
      table.innerHTML = '<tr><th>✓</th><th>Продукт</th><th>Сумма, руб.</th></tr>';
      for (const product in data) {
        const row = document.createElement("tr");
        row.innerHTML = `<td><input type='checkbox' data-product="${product}" onchange="toggleInput(this)"></td>
                         <td>${product}</td>
                         <td><input type='number' data-input="${product}" disabled></td>`;
        table.appendChild(row);
      }
    }

    function toggleInput(checkbox) {
  const product = checkbox.dataset.product;
  const parentTable = checkbox.closest('table');
  const input = parentTable.querySelector(`[data-input="${product}"]`);
  input.disabled = !checkbox.checked;
  if (!checkbox.checked) input.value = '';
}"]`);
      input.disabled = !checkbox.checked;
      if (!checkbox.checked) input.value = '';
    }

    function calculate(type) {
      const level = document.getElementById(type + "Level").value;
      const data = type === 'agent' ? agentData : resellerData;
      const isRegistered = type === 'agent' && document.getElementById("dealRegistered").checked;
      let sum = 0;
      for (const product in data) {
        const checkbox = document.querySelector(`#${type}Table input[data-product="${product}"]`);
        const input = document.querySelector(`#${type}Table input[data-input="${product}"]`);
        if (checkbox.checked && input.value) {
          const amount = parseFloat(input.value);
          const percent = data[product][level] || 0;
          let finalPercent = percent;
          if (type === 'agent' && isRegistered) {
            finalPercent += 0.15; // 15% за регистрацию сделки
          }
          sum += amount * finalPercent;
        }
      }
      document.getElementById(type + "Result").innerText = (type === 'agent' ? 'Скидка: ' : 'Вознаграждение: ') + sum.toFixed(2) + ' руб.';
    }

    function showTab(id) {
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelector(`[onclick="showTab('${id}')"]`).classList.add('active');
      document.getElementById(id).classList.add('active');
    }

    window.onload = () => {
      populateTable('agent', agentData);
      populateTable('reseller', resellerData);
    };
  </script>
</body>
</html>
